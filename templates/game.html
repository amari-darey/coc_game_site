{% extends "base.html" %}

{% block title %}Call of Cthulhu | –ò–≥—Ä–∞{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/character_sheet.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/game.css') }}">
    
{% endblock %}

{% block body %}
    <div class="game-container">
        <div class="participants-column">
            <h3 class="participants-title">–£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
            <div class="participants-list">
                <div class="participant-item" data-player="1">–ò–≥—Ä–æ–∫ 1 (–í—ã)</div>
                <div class="participant-item" data-player="2">–ò–≥—Ä–æ–∫ 2</div>
                <div class="participant-item" data-player="3">–ò–≥—Ä–æ–∫ 3</div>
            </div>
        </div>

        <div class="dice-log-area">
            <h3 class="dice-log-title">–ñ—É—Ä–Ω–∞–ª –±—Ä–æ—Å–∫–æ–≤</h3>
            <div class="dice-log-content" id="log-content">
                <div class="log-message own">
                    <div class="log-title">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ <strong>–í–Ω–∏–º–∞–Ω–∏–µ</strong></div>
                    <div class="log-content"><strong>–£—Å–ø–µ—Ö!</strong> 40 / 55</div>
                    <div class="log-player">–ò–≥—Ä–æ–∫ 1</div>
                </div>
                
                <div class="log-message other">
                    <div class="log-title">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ <strong>–ü—Å–∏—Ö–æ–∞–Ω–∞–ª–∏–∑</strong></div>
                    <div class="log-content"><strong>–¢—Ä—É–¥–Ω—ã–π —É—Å–ø–µ—Ö!</strong> 22 / 51</div>
                    <div class="log-player">–ò–≥—Ä–æ–∫ 2</div>
                </div>
            </div>
        </div>
    </div>

    <div class="dice-selector">
        <div class="dice-main-button" id="diceMainButton">üé≤</div>
        <div class="dice-options" id="diceOptions">
            <div class="dice-option" data-dice="3">d3</div>
            <div class="dice-option" data-dice="4">d4</div>
            <div class="dice-option" data-dice="6">d6</div>
            <div class="dice-option" data-dice="8">d8</div>
            <div class="dice-option" data-dice="10">d10</div>
            <div class="dice-option" data-dice="20">d20</div>
            <div class="dice-option" data-dice="100">d100</div>
        </div>
    </div>
    
    <div id="sheetModal" class="game-modal-overlay" role="dialog" aria-modal="true" aria-label="Character sheet modal">
        <div class="game-modal-content">
            <button class="modal-close" aria-label="Close modal" id="closeSheetModal">‚úï</button>
            <article class="sheet-paper" role="region" aria-label="Character sheet">
                <section class="sheet-left" aria-label="Basic info">
                    <div class="basic-info">
                        <div><span class="label">Name: </span><strong id="modal-player-name">Test (v3b character sheet)</strong></div>
                        <div><span class="label">Occupation: </span>Nurse</div>
                        <div><span class="label">Age: </span>9999</div>
                    </div>

                    <div class="attributes-grid" aria-hidden="false">
                        <div class="attr"><div class="name">STR</div><div class="value">85</div></div>
                        <div class="attr"><div class="name">CON</div><div class="value">60</div></div>
                        <div class="attr"><div class="name">SIZ</div><div class="value">70</div></div>
                        <div class="attr"><div class="name">DEX</div><div class="value">65</div></div>

                        <div class="attr"><div class="name">APP</div><div class="value">60</div></div>
                        <div class="attr"><div class="name">INT</div><div class="value">80</div></div>
                        <div class="attr"><div class="name">POW</div><div class="value">65</div></div>
                        <div class="attr"><div class="name">EDU</div><div class="value">46</div></div>
                    </div>

                    <div class="hp-mp-row" aria-hidden="false">
                        <div class="hp-block"><div>HP</div><div class="big">13</div></div>
                        <div class="mp-block"><div>MP</div><div class="big">13</div></div>
                        <div class="luck-block"><div>Luck</div><div class="big">99</div></div>
                        <div class="san-block"><div>SAN</div><div class="big">64</div></div>
                    </div>

                    <div class="mini-stats">
                        <strong style="color:var(--accent); font-family: 'Cinzel', serif;">Movement</strong>
                        <div style="display:flex;gap:10px;margin-top:8px;">
                            <div style="flex:1">Move: <strong>8</strong></div>
                            <div style="flex:1">Build: <strong>1</strong></div>
                            <div style="flex:1">DB: <strong>1D4</strong></div>
                        </div>
                    </div>
                </section>

                <aside class="sheet-right" aria-label="Development & skills">
                    <div class="development-header">
                        <div class="dev-badges">
                            <div class="badge">Personal: 160</div>
                            <div class="badge purple">Occupation: 184</div>
                            <div class="badge">XP: 19</div>
                        </div>
                    </div>

                    <div style="font-size:.95rem;color:var(--accent);padding-left:4px; font-family: 'Cinzel', serif;">Skills</div>

                    <div class="skills-list" role="list" aria-label="skills list">
                        <div class="skills-list-header" aria-hidden="true">
                            <div>Skill</div>
                            <div class="col-label">–£</div>
                            <div class="col-label">–¢</div>
                            <div class="col-label">–ß</div>
                        </div>

                        {% for skill_name, element in context.skill.items() %}
                            <div class="skill-row" role="listitem">
                                <div class="skill-name">{{ element.rus }}</div>
                                <div><span class="skill-pill">{{ element.value }}</span></div>
                                <div><span class="skill-pill">{{ (element.value / 2)|int }}</span></div>
                                <div><span class="skill-pill">{{ (element.value / 5)|int }}</span></div>
                            </div>
                        {% endfor %}
                    </div>
                </aside>
            </article>
        </div>
    </div>

    <div class="character-sheet-conteiner">
        {% include "character_sheet.html" %}
    </div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/game.js') }}"></script>
{% endblock %}
